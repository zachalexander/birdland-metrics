<div class="home-layout">
  <!-- Hero -->
  <section class="hero">
    @if (oriolesOdds(); as odds) {
      <div class="hero-top">
        <div class="hero-question">
          <h1 class="hero-label">
            <span class="hero-label-full">Are the O's Making the Playoffs in 2026?</span>
            <span class="hero-label-short">Are the O's Making the Playoffs in 2026?</span>
          </h1>
          <p class="hero-meta hero-meta-full">Model updated daily in-season from 10,000 simulated seasons.</p>
          <div class="hero-inline-meta hero-inline-meta-desktop" aria-label="Hero supporting metrics">
            @if (lastRunDate(); as runDate) {
              <span class="hero-inline-item">
                <span class="hero-inline-label">Latest Model Run:</span>
                <span class="hero-inline-value">{{ runDate }}</span>
              </span>
            }
          </div>
        </div>
        <div class="hero-numbers">
          <div class="hero-big-wrap">
            <div class="hero-gauge" [style.--pct]="odds.playoff_pct">
              <svg class="gauge-ring" viewBox="0 0 120 120">
                <circle class="gauge-track" cx="60" cy="60" r="54" />
                <circle class="gauge-fill" cx="60" cy="60" r="54"
                  [style.stroke-dashoffset]="339.29 - (339.29 * odds.playoff_pct / 100)" />
              </svg>
              <div class="gauge-inner">
                <span class="hero-big">{{ odds.playoff_pct | number: '1.0-0' }}<span class="hero-pct">%</span></span>
                <span class="hero-big-label">chance</span>
              </div>
            </div>
            @if (featuredArticle(); as explainer) {
              <a [routerLink]="['/articles', explainer.slug]" class="hero-readmore">Why 39%? Read the full breakdown &rsaquo;</a>
            } @else {
              <a [routerLink]="['/']" class="hero-readmore">Why 39%? Read the full breakdown &rsaquo;</a>
            }
            <div class="hero-inline-meta hero-inline-meta-mobile" aria-label="Hero supporting metrics">
              @if (lastRunDate(); as runDate) {
                <span class="hero-inline-item">
                  <span class="hero-inline-label">Latest Model Run:</span>
                  <span class="hero-inline-value">{{ runDate }}</span>
                </span>
              }
            </div>
          </div>
        </div>
      </div>
      @if (!dashboardLoading() && projections().length) {
        <div class="hero-histogram">
          <app-win-distribution
            [config]="{ teams: ['BAL'], compact: true }"
            [projections]="projections()"
            [theme]="darkTheme" />
        </div>
      }
    } @else {
      <div class="hero-question">
        <h1 class="hero-label">Birdland Metrics</h1>
        <p class="hero-meta">Data-driven analysis and projections for the Baltimore Orioles.</p>
      </div>
    }
  </section>
  @if (!dashboardLoading()) {
    <!-- AL East Race -->
    @if (projections().length) {
      <div class="race-split">
        <section class="race-panel section-card section-card-race">
          <p class="section-kicker race-kicker">Model Win Distribution</p>
          <app-win-distribution [config]="{ teams: ['BAL', 'NYY', 'BOS', 'TB', 'TOR'] }" />
        </section>
        <section class="race-panel section-card section-card-race">
          <p class="section-kicker race-kicker">Projected AL East Standings</p>
          <app-standings-table [projections]="projections()" [odds]="allOdds()" />
        </section>
      </div>
    }
  }

  <div class="editorial-split">
    <!-- Featured Article -->
    @if (!loading() && featuredArticle(); as feat) {
<section class="featured section-card section-card-featured">
<a [routerLink]="['/articles', feat.slug]" class="featured-link">
          @if (feat.coverImage) {
            <div class="featured-image">
              <picture>
                <source
                  type="image/avif"
                  [srcset]="feat.coverImage.url + '?w=600&h=320&fit=fill&fm=avif 600w, ' + feat.coverImage.url + '?w=1200&h=520&fit=fill&fm=avif 1200w'"
                  sizes="(max-width: 768px) 100vw, 800px"
                />
                <source
                  type="image/webp"
                  [srcset]="feat.coverImage.url + '?w=600&h=320&fit=fill&fm=webp 600w, ' + feat.coverImage.url + '?w=1200&h=520&fit=fill&fm=webp 1200w'"
                  sizes="(max-width: 768px) 100vw, 800px"
                />
<img
[src]="feat.coverImage.url + '?w=1200&h=520&fit=fill'"
[alt]="feat.coverImage.title"
width="1200"
height="520"
/>
</picture>
<div class="featured-overlay">
<div class="featured-overlay-content">
<p class="section-kicker featured-kicker-overlay">Spotlight</p>
<div class="featured-body featured-body-overlay">
@if (feat.tags.length) {
<span class="featured-tag">{{ feat.tags[0] }}</span>
}
<h2 class="featured-title">{{ feat.title }}</h2>
<div class="featured-meta">
@if (feat.author?.name) {
<span>{{ feat.author?.name }}</span>
<span class="featured-meta-dot">&middot;</span>
}
<span>{{ feat.readingTime }} min read</span>
</div>
</div>
</div>
</div>
</div>
        } @else {
          <div class="featured-body">
<p class="section-kicker">Spotlight</p>
@if (feat.tags.length) {
<span class="featured-tag">{{ feat.tags[0] }}</span>
}
            <h2 class="featured-title">{{ feat.title }}</h2>
            <div class="featured-meta">
              @if (feat.author?.name) {
                <span>{{ feat.author?.name }}</span>
                <span class="featured-meta-dot">&middot;</span>
              }
              <span>{{ feat.readingTime }} min read</span>
            </div>
          </div>
        }
      </a>
      </section>
    }

    <!-- Latest Articles -->
    <section class="articles-section section-card section-card-articles">
      @if (loading()) {
        <div class="loading-area">
          @for (_ of [1,2,3]; track $index) {
            <div class="skeleton-article">
              <div class="skeleton-thumb"></div>
              <div class="skeleton-text">
                <div class="skeleton-line short"></div>
                <div class="skeleton-line"></div>
                <div class="skeleton-line medium"></div>
              </div>
            </div>
          }
        </div>
      } @else if (latestPreviewArticles().length === 0) {
        <p class="empty-state">No articles yet. Check back soon for data-driven baseball analysis.</p>
      } @else {
        <div class="articles-list">
          @for (article of latestPreviewArticles(); track article.slug) {
            <app-article-card [article]="article" variant="spotlight" />
          }
        </div>
      }
    </section>
  </div>

  <!-- Newsletter -->
  <app-newsletter-cta />

  @if (!dashboardLoading() && recentGames().length) {
    <!-- Recent Games -->
    <section class="recent-section section-card section-card-momentum">
      <p class="section-kicker">Recent Orioles Games</p>
      <app-recent-games [games]="recentGames()" [gameType]="gamesType()" />
    </section>
  }
</div>
