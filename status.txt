# Launch Angle

## Overview
Baseball analytics blog — Angular 21 SSR + Contentful CMS + d3.js visualizations.
Orioles-inspired color palette (#df4a00 orange, #1a1a1a black).

## Repo
- GitHub: https://github.com/zachalexander/launch-angle
- Branch: `main`
- Path: `/Users/zdalexander/Desktop/launch-angle/`

## Tech Stack
- Angular 21 with SSR (Express-based via `@angular/ssr`)
- Contentful Delivery API (`contentful` npm package)
- `@contentful/rich-text-html-renderer` for rich text → HTML
- d3.js for visualizations (lazy-loaded, browser-only via `isPlatformBrowser`)
- Plain CSS (no framework)
- Dockerized for AWS deployment (Fargate/App Runner)

## Contentful Schema
- **Space ID**: `btpj5jq8xkdj`
- **Content type**: `article` (not `blogPost` — this was a gotcha during setup)
- **Article fields**: title, slug, excerpt, content (RichText), coverImage (Asset link), publishedAt (Date), tags (Array<Symbol>), isPremium (Boolean), featured (Boolean)
- **Author content type**: name, bio, avatar (Asset link) — linked to articles
- API key stored in `src/environments/environment.ts` (gitignored)
- `environment.prod.ts` reads from `CONTENTFUL_SPACE_ID` and `CONTENTFUL_ACCESS_TOKEN` env vars

## Architecture
```
src/app/
├── core/services/contentful.service.ts    — API client, maps entries to TypeScript models
├── features/
│   ├── home/                              — Hero + article card grid
│   ├── article-detail/                    — Full article, rich text rendering, JSON-LD, SEO meta
│   └── article-list/                      — Category/tag filtered grid
├── shared/
│   ├── components/header|footer|article-card
│   └── models/content.models.ts           — BlogPost, Author interfaces
└── visualizations/spray-chart/            — d3.js spray chart at /visualizations/spray-chart
```

## Routes
- `/` — Home (lazy-loaded HomeComponent)
- `/articles/:slug` — Article detail (lazy-loaded)
- `/category/:category` — Filtered list (lazy-loaded)
- `/visualizations/spray-chart` — d3.js spray chart (lazy-loaded)
- All routes use `RenderMode.Server` for SSR

## SEO
- `Meta` and `Title` services set og:title, og:description, og:image, og:type, twitter:card per page
- JSON-LD `BlogPosting` schema injected on article detail pages
- SSR ensures meta tags are in initial HTML response

## Docker
- Multi-stage Dockerfile: build with `node:20-alpine`, run with `node:20-alpine`
- Runs `node dist/launch-angle/server/server.mjs` on port 4000
- `.env.example` documents required env vars

## Deployment
- **Live URL**: https://bthqtdiamm.us-east-1.awsapprunner.com
- **Service**: AWS App Runner (auto-deploys on push to main)
- **Region**: us-east-1
- **Runtime**: Node.js 22
- **Instance**: 0.25 vCPU, 0.5 GB memory

## Current State (2026-02-06)
- 2 test articles in Contentful ("First Post", "Second Post") with cover images
- App is functional — articles load, detail pages render, SSR verified
- Spray chart wired to /visualizations/spray-chart with nav link in header
- Author linked to articles and displayed on article detail pages
- Tags added to articles, category filtering works

## Completed
- ✓ Wire spray chart into dedicated route
- ✓ Add tags to Contentful articles
- ✓ Link author entries to articles in Contentful
- ✓ Deploy to AWS App Runner

## Next Steps
- Add pagination for article lists
- Add custom domain
- Add more d3.js visualizations
